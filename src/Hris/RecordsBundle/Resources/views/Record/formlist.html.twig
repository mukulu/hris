{% extends '::base.html.twig' %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/hrisrecords/js/indexedb.js') }}"></script>

    <script type="text/javascript">

        /*
        Creating the Database if not Existing
         */
        createDatabase('{{ project_code | lower | raw }}','{{ table_names | raw | escape('js') }}', '{{ column_names | raw }}', '{{ data_values | raw | escape('js')}}');

        addRecords( '{{ project_code | lower | raw }}','{{ table_name | raw | escape('js') }}', '{{ data_values | raw | escape('js') }}' );

        addRecords( '{{ project_code | lower | raw }}','{{ field_table_name | raw | escape('js') }}', '{{ field_values | raw | escape('js') }}' );

        addRecords( '{{ project_code | lower | raw }}','{{ field_option_table_name | raw | escape('js') }}', '{{ field_option_values | raw | escape('js') }}' );

        addRecords( '{{ project_code | lower | raw }}','"{{ option_associations_table | raw | escape('js') }}"', '{{ option_associations_values | raw | escape('js') }}' );

    </script>

{% endblock %}

{% block right_content -%}
<div class="container">
    <h1><small>Data Entry Forms</small></h1>

    <table class="records_list dataTable table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>Title</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for entity in entities %}
            <tr>
                <td><a href="{{ path('record_new', { 'id': entity.id }) }}">{{ entity.title }}</a></td>
                <td>
                <ul class="inline">
                    <li>
                        <a href="{{ path('record_new', { 'id': entity.id }) }}"><i class="icon-down-arrow icon-large" title="Show"></i></a>
                    </li>
                </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
    <button name='delete' onclick="deleteDatabase('{{ project_code | lower | raw }}')" class="btn">Delete</button>

    <div id="result" />
    {% endblock %}
