{% extends '::base.html.twig' %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('commons/js/jquery.dataTables.js') }}"></script>
    <script type="text/javascript" src="{{ asset('commons/js/dt_settings.js') }}"></script>
    <script>window["_GOOG_TRANS_EXT_VER"] = "1";</script>
{% endblock javascripts %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('commons/css/dt_bootstrap.css') }}" />
{% endblock stylesheets %}

{% block right_content -%}
    <div class="container">
        <h1><small>{{ title }}</small></h1>
        {% set totalAlreadyPrinted='false' %}
        {% set headingAlreadyPrinted='false' %}
        {% set prevKey= 1 %}
        <table class="records_list dataTable table table-striped table-bordered table-hover" cellpadding="0" cellspacing="0" border="0">
            <thead>
                {% for key,friendlyReportCategory in friendlyReport.getFriendlyReportCategory %}
                    <tr>
                        {% if headingAlreadyPrinted=='false' %}
                            <th rowspan="{{ friendlyReport.getFriendlyReportCategory|length }}">{{ friendlyReport.getSerie.getName }}</th>
                            {% set headingAlreadyPrinted='true' %}
                        {% endif %}
                        {# If repetition is allowed repeat option groups for previous category #}
                        {% for incr in range(0,repetition[friendlyReportCategory.getFieldOptionGroup.getName]-1) if incr>=0 %}
                            {% for fieldOption in  friendlyReportCategory.getFieldOptionGroup.getFieldOption %}
                                <th colspan="{{ colspan[friendlyReportCategory.getFieldOptionGroup.getName] }}">{{ fieldOption.getValue }}</th>
                            {% endfor %}
                        {% endfor %}
                        {% if totalAlreadyPrinted=='false' %}
                            <th rowspan="{{ friendlyReport.getFriendlyReportCategory|length }}">Total</th>
                            {% set totalAlreadyPrinted='true' %}
                        {% endif %}
                    </tr>
                {% endfor %}
            </thead>
            <tbody>
                    {# If repetition is allowed repeat option groups for previous category #}
                    {% for friendlyReportResult in friendlyReportResults %}
                        <tr>
                        {% set fieldOptionValueTotal=0 %}
                        {% for fieldOptionValue in  friendlyReportResult %}
                            <td>{{ fieldOptionValue }}</td>
                            {% set fieldOptionValueTotal = fieldOptionValueTotal + fieldOptionValue %}
                        {% endfor %}
                            <td>{{ fieldOptionValueTotal }}</td>
                        </tr>
                    {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}